# Appendix A: 데이터 파이프라인 기술 가이드

- **권장 파이프라인:**
    1. **파싱:** 
        - **주력**: **`Qwen2.5-VL-7B-Instruct`** Vision 모델 (41.2% 품질 향상)
        - **폴백**: **`PyMuPDF4LLM`** → **`PyMuPDF`** (3-Tier 구조)
    2. **전처리:** `Kiwipiepy` (한국어) 및 정규식을 통한 국영문 혼합 텍스트 정제.
    3. **청킹:** 
        - **기본**: **`HierarchicalMarkdownChunker`** - Vision V2 마크다운 출력 최적화
            - 계층별 가변 크기: L1(1024/100), L2(512/50), L3-4(256/20-30)
        - **폴백**: **`DocumentChunker`** (RecursiveCharacterTextSplitter 기반, 512/50)
        - 한글과 영어 혼합 문서에는 `separators=["\n\n","\n"," ","."…]`에 한국어 마침표(`。`), 쉼표(`，`)를 추가
    4. **청킹 전략:** "필드별(제목/본문/표) 다른 청킹 전략 적용", "숫자/통화 표현 표준화"
    5. **한국어 처리:** **`Kiwipiepy`** 를 사용한 고속 형태소 분석 (BM25 키워드 검색용).
    6. **검색 전략:** BM25(Kiwipiepy 토크나이저)와 벡터 검색(KURE 임베딩)을 결합한 **하이브리드 검색** 구현.
    7. **FAISS 최적화:** "데이터 규모에 따른 `nlist`, `nprobe` 파라미터 튜닝"
    

---
