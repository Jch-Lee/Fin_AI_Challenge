# RAG 시스템 상세 진단 보고서

## 테스트 개요
- **실행 시간**: 2025-08-20 10:50:54
- **총 소요 시간**: 약 90초 (5문제)
- **평균 처리 시간**: 18초/문제
- **RAG 설정**: BM25=70%, Vector=30%
- **청크 개수**: 8,270개

## 전체 통계

### 점수 우세 분포
| 패턴 | 개수 | 비율 |
|------|------|------|
| BM25 우세 | 1 | 20% |
| Vector 우세 | 1 | 20% |
| 균형 | 3 | 60% |

### 평균 점수
- **BM25 평균**: 0.3835
- **Vector 평균**: 0.4185
- **전체 비율**: 0.92 (Vector가 약간 우세)

---

## 각 문제별 상세 분석

### 1. TEST_000 (객관식)

#### 문제
"금융산업의 이해와 관련하여 금융투자업의 구분에 해당하지 않는 것은?"
1. 소비자금융업
2. 투자자문업
3. 투자매매업
4. 투자중개업
5. 보험중개업

#### 검색된 문서 5개의 점수

| 순위 | BM25 점수 | Vector 점수 | Hybrid 점수 | 검색 방식 |
|------|------------|--------------|---------------|----------|
| 1 | 0.9999 | 0.0000 | 0.6999 | BM25 |
| 2 | 0.9997 | 0.0000 | 0.6998 | BM25 |
| 3 | 0.5683 | 0.0000 | 0.3978 | BM25 |
| 4 | 0.5614 | 0.0000 | 0.3929 | BM25 |
| 5 | 0.0000 | 1.0000 | 0.3000 | Vector |

#### 사고 과정 및 판단 근거
- **점수 우세**: BM25 (3.13배)
- **효과성**: "BM25가 매우 효과적 - 키워드 매칭이 핵심"
- **상위 문서 검색 방식**: BM25
- 하이브리드 점수가 가장 높은 문서들은 모두 BM25로 검색됨
- Vector로 검색된 문서(5번)는 "자본시장통합법"에 관한 내용으로 금융투자업과 관련이 있음

#### 하이브리드 파이프라인 결론
- 현재 설정(BM25=70%, Vector=30%)이 이 문제에 적합
- 키워드 기반 검색이 효과적

---

### 2. TEST_001 (객관식)

#### 문제
"위험 관리 계획 수립 시 고려해야 할 요소로 적절하지 않은 것은?"
1. 수행인력
2. 위험 수용
3. 위험 대응 전략 선정
4. 대상
5. 기간

#### 검색된 문서 5개의 점수

| 순위 | BM25 점수 | Vector 점수 | Hybrid 점수 | 검색 방식 |
|------|------------|--------------|---------------|----------|
| 1 | 1.0000 | 0.0000 | 0.7000 | BM25 |
| 2 | 0.4920 | 0.0000 | 0.3444 | BM25 |
| 3 | 0.4916 | 0.0000 | 0.3441 | BM25 |
| 4 | 0.0000 | 1.0000 | 0.3000 | Vector |
| 5 | 0.0000 | 0.5639 | 0.1692 | Vector |

#### 사고 과정 및 판단 근거
- **점수 우세**: 균형 (1.27배)
- **효과성**: "균형잡힌 효과 - 하이브리드 방식이 적절"
- **상위 문서 검색 방식**: BM25
- BM25와 Vector가 상호보완적으로 작동
- Vector로 검색된 문서(4, 5번)는 위험 관리와 직접적 관련

#### 하이브리드 파이프라인 결론
- 하이브리드 방식의 효과성 입증
- 두 검색 방식이 상호보완적

---

### 3. TEST_002 (객관식)

#### 문제
"관리체계 수립 및 운영'의 '정책 수립' 단계에서 가장 중요한 요소는 무엇인가?"
1. 정보보호 및 개인정보보호 정책의 제·개정
2. 경영진의 참여
3. 최고책임자의 지정
4. 자원 할당
5. 내부 감사 절차의 수립

#### 검색된 문서 5개의 점수

| 순위 | BM25 점수 | Vector 점수 | Hybrid 점수 | 검색 방식 |
|------|------------|--------------|---------------|----------|
| 1 | 1.0000 | 0.0000 | 0.7000 | BM25 |
| 2 | 0.0000 | 1.0000 | 0.3000 | Vector |
| 3 | 0.0000 | 0.9951 | 0.2985 | Vector |
| 4 | 0.0000 | 0.7979 | 0.2394 | Vector |
| 5 | 0.0000 | 0.7903 | 0.2371 | Vector |

#### 사고 과정 및 판단 근거
- **점수 우세**: Vector (0.31배)
- **효과성**: "Vector가 매우 효과적 - 의미적 유사성이 핵심"
- **상위 문서 검색 방식**: BM25(1위), Vector(2-5위)
- 의미 기반 검색이 더 많은 관련 문서 발견

#### 하이브리드 파이프라인 결론
- Vector 비중을 높이면 성능 개선 가능
- 현재 설정에서도 상위 문서는 BM25로 검색

---

### 4. TEST_004 (주관식)

#### 문제
"트로이 목마(Trojan) 기반 원격제어 악성코드(RAT)의 특징과 주요 탐지 지표를 설명하세요."

#### 검색된 문서 5개의 점수

| 순위 | BM25 점수 | Vector 점수 | Hybrid 점수 | 검색 방식 |
|------|------------|--------------|---------------|----------|
| 1 | 0.5648 | 0.0000 | 0.3954 | BM25 |
| 2 | 0.5613 | 0.0000 | 0.3929 | BM25 |
| 3 | 0.0000 | 0.9934 | 0.2980 | Vector |
| 4 | 0.0000 | 0.8814 | 0.2644 | Vector |
| 5 | 0.0000 | 0.8185 | 0.2456 | Vector |

#### 사고 과정 및 판단 근거
- **점수 우세**: 균형 (0.86배)
- **효과성**: "균형잡힌 효과 - 하이브리드 방식이 적절"
- **상위 문서 검색 방식**: BM25(1-2위), Vector(3-5위)
- 주관식 문제에서도 BM25가 여전히 중요

#### 하이브리드 파이프라인 결론
- 하이브리드 방식이 주관식 문제에도 효과적
- 전문용어 매칭과 의미 이해 모두 필요

---

### 5. TEST_007 (주관식)

#### 문제
"전자금융거래법에 따라 이용자가 금융 분쟁조정을 신청할 수 있는 기관을 기술하세요."

#### 검색된 문서 5개의 점수

| 순위 | BM25 점수 | Vector 점수 | Hybrid 점수 | 검색 방식 |
|------|------------|--------------|---------------|----------|
| 1 | 0.0000 | 0.9998 | 0.2999 | Vector |
| 2 | 0.0000 | 0.9974 | 0.2992 | Vector |
| 3 | 0.0000 | 0.9960 | 0.2988 | Vector |
| 4 | 0.0000 | 0.9959 | 0.2988 | Vector |
| 5 | 0.0000 | 0.9933 | 0.2980 | Vector |

#### 사고 과정 및 판단 근거
- **점수 우세**: 균형 (0.68배)
- **효과성**: "균형잡힌 효과 - 하이브리드 방식이 적절"
- **상위 문서 검색 방식**: 모두 Vector
- 법률 관련 주관식 문제에서 Vector가 우세

#### 하이브리드 파이프라인 결론
- Vector 검색이 법률 관련 내용에 효과적
- 하지만 여전히 균형 범위 내

---

## 종합 분석 및 결론

### 핵심 발견사항

1. **균형잡힌 패턴이 우세 (60%)**
   - 5문제 중 3문제가 균형 패턴
   - 하이브리드 방식의 효과성 입증

2. **Vector 평균 점수가 약간 더 높음**
   - BM25: 0.3835
   - Vector: 0.4185
   - 전체 비율: 0.92

3. **문제 유형별 패턴**
   - 객관식: 다양한 패턴 (BM25, Vector, 균형)
   - 주관식: 주로 균형 패턴

4. **LLM 분석 결과**
   - 대부분의 경우 사고 과정 추출 실패
   - 프롬프트 개선 필요

### 권장사항

1. **현재 설정 유지**
   - BM25=70%, Vector=30%는 적절함
   - 균형잡힌 패턴이 우세하여 하이브리드가 효과적

2. **미세 조정 가능성**
   - Vector 비중을 35%로 약간 증가 검토
   - 주관식 문제 성능 개선 기대

3. **추가 개선 방향**
   - 리랭킹 모델 도입 검토
   - LLM 프롬프트 개선
   - 더 많은 테스트 데이터로 검증

---

**작성일**: 2025-08-20
**버전**: 2.0 (LLM 분석 포함)