# RAG 빠른 진단 테스트 분석 결과

## 실험 일시
- 실행 시간: 2025-08-20 07:41:32
- 테스트 문제 수: 5개 (객관식 3개, 주관식 2개)
- RAG 설정: BM25=70%, Vector=30%

## 주요 발견사항

### 1. 점수 우세 패턴 (Score Dominance)

| 구분 | 개수 | 비율 |
|------|------|------|
| BM25 우세 | 1 | 20% |
| Vector 우세 | 1 | 20% |
| 균형 | 3 | 60% |

**핵심 인사이트**: 5개 문제 중 60%가 균형잡힌 패턴을 보임. 이는 BM25와 Vector 검색이 상호보완적으로 작동하고 있음을 시사.

### 2. 문제 유형별 분석

#### 객관식 문제 (3개)
- **TEST_000**: BM25 우세 (비율 3.13) - "금융투자업의 구분"
  - BM25가 매우 강력 (평균 0.626 vs 0.2)
  - 키워드 매칭이 효과적
  
- **TEST_001**: 균형 (비율 1.27) - "위험 관리 계획 수립"
  - BM25와 Vector가 비슷한 기여도
  
- **TEST_002**: Vector 우세 (비율 0.31) - "관리체계 수립 및 운영"
  - 의미적 유사성이 더 중요

#### 주관식 문제 (2개)
- **TEST_004**: 균형 (비율 0.86) - "트로이 목마 RAT 특징"
- **TEST_007**: 균형 (비율 0.68) - "전자금융거래법 분쟁조정"

**핵심 인사이트**: 주관식 문제에서 예상과 달리 Vector가 우세하지 않고 균형잡힌 패턴을 보임.

### 3. 검색 품질 분석

#### Top-1 문서 점수
- 평균 하이브리드 점수: 약 0.65
- BM25 최고 점수: 1.0 (완벽한 매칭)
- Vector 최고 점수: 1.0 (높은 의미적 유사도)

#### 검색 방법 분포
- BM25만으로 검색된 문서: 약 60%
- Vector만으로 검색된 문서: 약 30%
- 하이브리드 검색: 약 10%

### 4. 현재 설정의 적절성

**현재 설정 (BM25=70%, Vector=30%) 평가**:
- ✅ **적절함**: 균형잡힌 패턴이 60%로 가장 많음
- ✅ **효과적**: BM25와 Vector가 상호보완적으로 작동
- ⚠️ **개선여지**: Vector 비중을 약간 높여볼 여지 있음 (30% → 35-40%)

## 권장사항

### 단기 개선 (1주)
1. **가중치 미세조정 실험**
   - 현재: BM25=70%, Vector=30%
   - 테스트: BM25=65%, Vector=35%
   - 테스트: BM25=60%, Vector=40%
   
2. **문제 유형별 최적화**
   - 객관식: BM25 비중 유지 또는 증가
   - 주관식: Vector 비중 약간 증가

### 중기 개선 (2-3주)
1. **더 많은 테스트 데이터**
   - 20문제 전체 테스트 필요
   - 다양한 도메인 문제 포함
   
2. **검색 품질 개선**
   - 리랭킹 모델 도입 검토
   - 문서 청킹 크기 최적화 (현재 2300자)

### 장기 개선 (1개월+)
1. **적응형 가중치 시스템**
   - 문제 유형 자동 감지
   - 유형별 최적 가중치 적용
   
2. **지식 베이스 확장**
   - 현재 8,270개 청크 → 15,000+ 목표
   - 더 많은 금융보안 문서 추가

## 결론

현재 RAG 시스템의 BM25=70%, Vector=30% 설정은 **대체로 적절**하나, 균형잡힌 패턴이 많다는 것은 두 검색 방식이 모두 중요함을 의미합니다. Vector 비중을 약간 높여 35-40%로 조정하면 더 나은 성능을 기대할 수 있습니다.

특히 주관식 문제에서 예상보다 BM25의 기여도가 높은 것은 금융보안 도메인의 특성(전문용어, 법령명 등)을 반영하는 것으로 보입니다.

---

**다음 단계**: 
1. 전체 20문제 테스트 실행 (시간이 오래 걸리더라도)
2. 다양한 가중치 설정으로 A/B 테스트
3. 최종 최적 설정 결정