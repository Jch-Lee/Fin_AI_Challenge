INFO:vision.vision_extraction:VisionTextExtractor initialized with device: cuda
Vision v2.5 테스트 시작
VisionTextExtractor 초기화 성공
Vision 모델 사용 가능

컨텍스트 시스템 테스트:
  - 첫 페이지 프롬프트 길이: 1311 문자
  - 두 번째 페이지 프롬프트 길이: 1455 문자
  - 컨텍스트 힌트 포함됨: True

마크다운 검증 시스템 테스트:
  - 헤더 감지: True
  - 리스트 감지: True
  - 표 감지: True
  - 연속성 마커: False
  - 구조 점수: 0.90/1.0
  - 헤더 개수: 3

컨텍스트 업데이트 테스트:
  - 마지막 헤더: ### 표 예시
  - 불완전 페이지: True
  - 마지막 문장: ...이 내용은 다음 페이지에서 [다음 페이지에 계속]

프롬프트 누출 방지 테스트:
  - 누출된 텍스트 필터링:
    원본 길이: 213 -> 필터링 후: 5
    결과: 내용 없음...
  - 빈 내용 처리:
    원본 길이: 72 -> 필터링 후: 5
    결과: 내용 없음

모든 기본 테스트 통과!

주요 개선사항:
  - 기존 41.2% 성능 향상 프롬프트 유지
  - 마크다운 구조화 지침 추가
  - 페이지 간 컨텍스트 추적
  - 품질 검증 시스템 통합
  - 프롬프트 누출 방지 시스템 추가
  - 청킹 최적화 준비 완료

Vision v2.5 개선 완료!
이제 LlamaIndex MarkdownNodeParser와 함께 사용할 준비가 되었습니다.
